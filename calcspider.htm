<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Calc Spider</title>
        <meta charset="utf-8"> 
        <link rel="SHORTCUT ICON" href="favicon.ico">
        <link rel="stylesheet" href="assets/styles.css">
    </head>
<body onLoad="loadspider(); self.focus();document.theForm.a.focus()">
<script src="myfunctions.js"></script>
<script> 
    var x,y,z,c1,c2, doa=true
    // ---------------------------------------------------
    function enter(evt) { 
    var charCode = evt.keyCode;
    if (charCode == 13) {doa=!doa; calc(); return}
    if (charCode == 27) {clere(); return};}
    // ---------------------------------------------------
    function clere() {
    document.theForm.a.value=""
    document.theForm.b.value=""
    document.theForm.c.value=""
    document.theForm.d.value=""
    document.theForm.a.focus()}
    //-----------------------
    function plus1(){
    a = Number(document.theForm.a.value)
    document.theForm.a.value=(a+1)
    calc()
    }
    //-----------------------
    function less1(){
    b = Number(document.theForm.b.value)
    document.theForm.b.value=(b+1)
    calc()
    }
    //-----------------------
    function calc() {
    var a = Number(document.theForm.a.value)
    var b = Number(document.theForm.b.value)
    document.theForm.c.value=""
    document.theForm.d.value=""
    document.theForm.e.value=""
    var t=a+b
    if (t!=0){
    var c=Math.floor(100*a/t); document.theForm.c.value=c+"%" 
    var cl=Math.floor(100*a/(t+1)); document.theForm.cl.value=cl+"%" 
    var cw=Math.floor(100*(a+1)/(t+1)); document.theForm.cw.value=cw+"%" 
     if (t!=a && c!=99) 
     { e=0; f=c; while (f==c) 
       { e++; t=a+b+e; f=Math.floor(100*(a+e)/t) }
       document.theForm.d.value=(a+e)
       document.theForm.e.value=e }
     else 
     { document.theForm.d.value="* * *"
       document.theForm.e.value="* * *" } }
    localStorage.spider = document.theForm.a.value+";"+document.theForm.b.value
    }
    // ---------------------------------------------------
    function loadspider(){
    var xx = unescape(localStorage.spider);
    var xx0 = xx.search(/;/)
    if (xx0>-1) {
    document.theForm.a.value=Number(xx.slice(0,xx0))
    document.theForm.b.value=Number(xx.slice(xx0+1))
    calc()
    }}
</script>
    <h1>Spider</h1>
    <form name="theForm">
        <table>
            <tr>
                <th id="wins" onclick="plus1()">Wins</th>
                <td><input type="text" name="a" size=5 rows=1 tabindex="1" value="" onblur="doa=false; calc()" onKeyUp="enter(event)"/></td>
            </tr>
            <tr>
                <th id="wins" onclick="less1()" >Losses</th>
                <td><input type="text" name="b" size=5 rows=1 tabindex="2" value="" onblur="doa=true; calc()" onKeyUp="enter(event)"/></td>
            </tr>
            <tr>
                <td>Percent</td>
                <td><input type="text" name="c" size=5 rows=1 value="" tabindex="-1" readonly/></td>
            </tr>
            <tr>
                <td>next level</td>
                <td><input type="text" name="d" size=5 rows=1 value=""  tabindex="-1" readonly/></td>
            </tr>
            <tr>
                <td>need</td>
                <td><input type="text" name="e" size=5 rows=1 value=""  tabindex="-1" readonly/></td>
            </tr>
            <tr>
                <td>win 1</td>
                <td><input type="text" name="cw" size=5 rows=1 value=""  tabindex="-1" readonly/>
                </td>
            </tr>
            <tr>
                <td>lose 1</td>
                <td><input type="text" name="cl" size=5 rows=1 value=""  tabindex="-1" readonly/></td>
            </tr>
        </table>
    </form>
</body>
</html>
